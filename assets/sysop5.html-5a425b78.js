import{_ as n,o as s,c as a,a as t}from"./app-a2b6e588.js";const p={},o=t(`<h1 id="设置系统时间" tabindex="-1"><a class="header-anchor" href="#设置系统时间" aria-hidden="true">#</a> 设置系统时间</h1><h2 id="_1-添加timer-和-datapicker-控件" tabindex="-1"><a class="header-anchor" href="#_1-添加timer-和-datapicker-控件" aria-hidden="true">#</a> 1 添加timer 和 Datapicker 控件</h2><h2 id="_2-using" tabindex="-1"><a class="header-anchor" href="#_2-using" aria-hidden="true">#</a> 2 using</h2><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>InteropServices</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_3。code" tabindex="-1"><a class="header-anchor" href="#_3。code" aria-hidden="true">#</a> 3。code</h2><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span> <span class="token string">&quot;Kernel32.dll&quot;</span> <span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">GetLocalTime</span><span class="token punctuation">(</span><span class="token class-name">SystemTime</span> st <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">DllImport</span><span class="token attribute-arguments"><span class="token punctuation">(</span> <span class="token string">&quot;Kernel32.dll&quot;</span> <span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">extern</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SetLocalTime</span><span class="token punctuation">(</span><span class="token class-name">SystemTime</span> st <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">StructLayout</span><span class="token attribute-arguments"><span class="token punctuation">(</span> LayoutKind<span class="token punctuation">.</span>Sequential<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SystemTime</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">ushort</span></span> wYear<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">ushort</span></span> wMonth<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">ushort</span></span> wDayOfWeek<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">ushort</span></span> wDay<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">ushort</span></span> wHour<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">ushort</span></span> wMinute<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">ushort</span></span> wSecond<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name"><span class="token keyword">ushort</span></span> wMilliseconds<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-code" tabindex="-1"><a class="header-anchor" href="#_4-code" aria-hidden="true">#</a> 4 code</h2><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">timer1_Tick</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">System<span class="token punctuation">.</span>EventArgs</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">SystemTime</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SystemTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">GetLocalTime</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token operator">=</span><span class="token string">&quot;The Date and Time is: &quot;</span> <span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token operator">+</span>st<span class="token punctuation">.</span>wHour<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token operator">+</span>st<span class="token punctuation">.</span>wMinute<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token operator">+</span>st<span class="token punctuation">.</span>wSecond<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>Text<span class="token operator">+</span>st<span class="token punctuation">.</span>wMilliseconds<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Form1_Load</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">System<span class="token punctuation">.</span>EventArgs</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timer1<span class="token punctuation">.</span>Interval<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>timer1<span class="token punctuation">.</span>Enabled<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dateTimePicker1<span class="token punctuation">.</span>Value<span class="token operator">=</span>DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//设置按钮</span>
<span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">button1_Click</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">System<span class="token punctuation">.</span>EventArgs</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">SystemTime</span> st <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SystemTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    st<span class="token punctuation">.</span>wYear<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>dateTimePicker1<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>Year<span class="token punctuation">;</span>
    st<span class="token punctuation">.</span>wMonth<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>dateTimePicker1<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>Month<span class="token punctuation">;</span>
    st<span class="token punctuation">.</span>wDay<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>dateTimePicker1<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>Day<span class="token punctuation">;</span>
    st<span class="token punctuation">.</span>wHour<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>dateTimePicker1<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>Hour<span class="token punctuation">;</span>
    st<span class="token punctuation">.</span>wMinute<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>dateTimePicker1<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>Minute<span class="token punctuation">;</span>
    st<span class="token punctuation">.</span>wSecond<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">ushort</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>dateTimePicker1<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>Second<span class="token punctuation">;</span>
    <span class="token function">SetLocalTime</span><span class="token punctuation">(</span>st<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>`,8),e=[o];function c(u,l){return s(),a("div",null,e)}const i=n(p,[["render",c],["__file","sysop5.html.vue"]]);export{i as default};
