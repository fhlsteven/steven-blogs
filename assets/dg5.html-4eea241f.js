import{_ as n,o as a,c as s,a as t}from"./app-f0851ed3.js";const p={},o=t(`<h1 id="如何设置通过绑定填充的datagrid的列宽度" tabindex="-1"><a class="header-anchor" href="#如何设置通过绑定填充的datagrid的列宽度" aria-hidden="true">#</a> 如何设置通过绑定填充的datagrid的列宽度</h1><div class="language-txt" data-ext="txt"><pre class="language-txt"><code>主　　题：  如何设置通过绑定填充的datagrid的列宽度？
作　　者：  gatr ()
等　　级：  ^^^^
信 誉 值：  98
所属论坛：  .NET技术 C#
问题点数：  50
回复次数：  2
发表时间：  2003-09-23 15:12:44
</code></pre></div><p>我通过数据绑定填充了一个datagrid:</p><p><code>this.dataGridInfo.SetDataBinding(m_DataSet,m_TableName);</code></p><p>可以正确显示数据，也可以用<code>dataGridInfo[i,j].ToString()</code>来读某单元格的内容，但<code>this.dataGridInfo.TableStyles.count</code>确等于0，也就是无法用<code>this.dataGridInfo.TableStyles[0].GridColumnStyles[i].Width</code>来设置宽度，该这类情况该如何设置列宽？窗口为winform.</p><hr><hr><p>回复人： smiletosky(仰笑九天) ( 五级(中级)) 信誉：101 2003-09-23 15:26:00 得分:0</p><blockquote></blockquote><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">DataGridTableStyle</span> dgStyle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTableStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dgStyle<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dtExamset<span class="token punctuation">.</span>TableName<span class="token punctuation">;</span>
<span class="token class-name">DataGridColumnStyle</span> dcEnddate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dcEnddate<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> <span class="token string">&quot;enddate&quot;</span><span class="token punctuation">;</span>
dcEnddate<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> <span class="token string">&quot;结束时间&quot;</span><span class="token punctuation">;</span>
dcEnddate<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">75</span><span class="token punctuation">;</span>
dgStyle<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>dcEnddate<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>dgExamset<span class="token punctuation">.</span>TableStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>dgStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>回复人： wangj2001(乡村酒吧) ( 一级(初级)) 信誉：100 2003-09-23 15:39:00 得分:0</p><blockquote></blockquote><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">AddCellFormattingColumnStyles</span><span class="token punctuation">(</span><span class="token class-name">DataGrid</span> grid<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name">DataGridTableStyle</span> dgts <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTableStyle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataTable</span> dt <span class="token operator">=</span> <span class="token punctuation">(</span>DataTable<span class="token punctuation">)</span>grid<span class="token punctuation">.</span>DataSource<span class="token punctuation">;</span>

    dgts<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>TableName<span class="token punctuation">;</span>

    dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>DataType <span class="token operator">=</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">bool</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> boolCol <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PubLib<span class="token punctuation">.</span>XXDataGridBoolColumn</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//定义bool型列</span>
    boolCol<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>                     <span class="token comment">//映射纪录的字段为 :处理标志</span>
    boolCol<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>                                            <span class="token comment">//列标题</span>
    boolCol<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>                                                 <span class="token comment">//列宽</span>
    boolCol<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                                           <span class="token comment">//列的只读书型</span>
    <span class="token punctuation">(</span><span class="token punctuation">(</span>DataGridBoolColumn<span class="token punctuation">)</span>boolCol<span class="token punctuation">)</span><span class="token punctuation">.</span>AllowNull <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                    <span class="token comment">//当列的值为空时默认值</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>boolCol<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> TextCol0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TextCol0<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span> <span class="token comment">//from dataset table</span>
    TextCol0<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>
    TextCol0<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    TextCol0<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>TextCol0<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> TextCol1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TextCol1<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span> <span class="token comment">//from dataset table</span>
    TextCol1<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>
    TextCol1<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">95</span><span class="token punctuation">;</span>
    TextCol1<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    TextCol1<span class="token punctuation">.</span>NullText <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>TextCol1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> TextCol13 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TextCol13<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span> <span class="token comment">//from dataset table</span>
    TextCol13<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>
    TextCol13<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">170</span><span class="token punctuation">;</span>
    TextCol13<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    TextCol13<span class="token punctuation">.</span>NullText <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>TextCol13<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> TextCol2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TextCol2<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span> <span class="token comment">//from dataset table</span>
    TextCol2<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>
    TextCol2<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>
    TextCol2<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    TextCol2<span class="token punctuation">.</span>NullText <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>TextCol2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> TextCol3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TextCol3<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span> <span class="token comment">//from dataset table</span>
    TextCol3<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>
    TextCol3<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">62</span><span class="token punctuation">;</span>
    TextCol3<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    TextCol3<span class="token punctuation">.</span>NullText <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>TextCol3<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> TextCol5 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TextCol5<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span> <span class="token comment">//from dataset table</span>
    TextCol5<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>
    TextCol5<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">76</span><span class="token punctuation">;</span>
    TextCol5<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    TextCol5<span class="token punctuation">.</span>NullText <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>                                                <span class="token comment">//定义当列为空时的默认值</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>TextCol5<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridTextBoxColumn</span> dgtbc<span class="token punctuation">;</span>                                        <span class="token comment">//定义某一单元格中文本显示属性</span>
    dgtbc <span class="token operator">=</span> TextCol5 <span class="token keyword">as</span> <span class="token class-name">DataGridTextBoxColumn</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dgtbc <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
        dgtbc<span class="token punctuation">.</span>Format <span class="token operator">=</span> <span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> TextCol4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TextCol4<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span> <span class="token comment">//from dataset table</span>
    TextCol4<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>
    TextCol4<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">66</span><span class="token punctuation">;</span>
    TextCol4<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    TextCol4<span class="token punctuation">.</span>NullText <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>TextCol4<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> TextCol10 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TextCol10<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span> <span class="token comment">//from dataset table</span>
    TextCol10<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>
    TextCol10<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">130</span><span class="token punctuation">;</span>
    TextCol10<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    TextCol10<span class="token punctuation">.</span>NullText <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>TextCol10<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">DataGridColumnStyle</span> TextCol11 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataGridTextBoxColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    TextCol11<span class="token punctuation">.</span>MappingName <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span> <span class="token comment">//from dataset table</span>
    TextCol11<span class="token punctuation">.</span>HeaderText <span class="token operator">=</span> dt<span class="token punctuation">.</span>Columns<span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ColumnName<span class="token punctuation">;</span>
    TextCol11<span class="token punctuation">.</span>Width <span class="token operator">=</span> <span class="token number">170</span><span class="token punctuation">;</span>
    TextCol11<span class="token punctuation">.</span>ReadOnly <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    TextCol11<span class="token punctuation">.</span>NullText <span class="token operator">=</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    dgts<span class="token punctuation">.</span>GridColumnStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>TextCol11<span class="token punctuation">)</span><span class="token punctuation">;</span>

    dgts<span class="token punctuation">.</span>AlternatingBackColor <span class="token operator">=</span> Color<span class="token punctuation">.</span>Gainsboro<span class="token punctuation">;</span>

    grid<span class="token punctuation">.</span>TableStyles<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    grid<span class="token punctuation">.</span>TableStyles<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>dgts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">CurrencyManager</span> cm <span class="token operator">=</span> <span class="token punctuation">(</span>CurrencyManager<span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>BindingContext<span class="token punctuation">[</span>grid<span class="token punctuation">.</span>DataSource<span class="token punctuation">,</span> grid<span class="token punctuation">.</span>DataMember<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">(</span><span class="token punctuation">(</span>DataView<span class="token punctuation">)</span>cm<span class="token punctuation">.</span>List<span class="token punctuation">)</span><span class="token punctuation">.</span>AllowNew <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>`,13),e=[o];function c(l,u){return a(),s("div",null,e)}const i=n(p,[["render",c],["__file","dg5.html.vue"]]);export{i as default};
