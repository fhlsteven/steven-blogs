import{_ as n,o as s,c as a,a as t}from"./app-8e5157a8.js";const o={},p=t(`<h1 id="怎样设置-离线" tabindex="-1"><a class="header-anchor" href="#怎样设置-离线" aria-hidden="true">#</a> 怎样设置“离线”？</h1><div class="language-txt" data-ext="txt"><pre class="language-txt"><code>主　　题：  怎样设置“离线”？
作　　者：  nia2000 ()  
等　　级：
信 誉 值：  100
所属论坛：  .NET技术 C#
问题点数：  20
回复次数：  17
发表时间：  2003-9-26 20:47:06
</code></pre></div><p>我在一个web应用程序中，在登录的时候把状态设置成“在线”，我想在用户离开程序的时候设置成“离线”，不知道该写在什么事件下？请高手指点一下！！谢谢！像登录的时候我可以在按钮onclick时候记下，但是在用户离开系统的时候不知道写在什么事件下？？他如果直接点×怎么办？？</p><hr><hr><p>回复人： chestnuts(c# Sharp) ( 四级(中级)) 信誉：100 2003-9-26 20:49:59 得分:0</p><blockquote><p>分太少~</p></blockquote><p>回复人： nia2000() ( 一级(初级)) 信誉：100 2003-9-26 22:44:11 得分:0</p><blockquote><p>大哥小弟没什么分的！<br> 你上这里来主要是要分的？？</p></blockquote><p>回复人： wangjs720(听雨舟) ( 三级(初级)) 信誉：100 2003-9-26 23:06:46 得分:5</p><blockquote><p>关注</p></blockquote><p>回复人： yan1617() ( 一级(初级)) 信誉：100 2003-9-27 8:45:50 得分:5</p><blockquote><p>up</p></blockquote><p>回复人： chestnuts(c# Sharp) ( 四级(中级)) 信誉：100 2003-9-27 9:32:16 得分:10</p><blockquote><p>哎？！算了~~<br> 便宜卖好了~<br> 教你个技巧好了~<br> 这个答案值100分的~<br> 举例子：<br> 在当用户直接点X的时候...<br> 在PageLoad里对<code>Session[&quot;Status&quot;]</code>进行操作！<br></p></blockquote><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token function">PageLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>IsPostBack<span class="token punctuation">)</span><span class="token comment">//如果是回发，则恢复状态Session[&quot;Status&quot;]</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Session<span class="token punctuation">[</span><span class="token string">&quot;Status&quot;</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Session<span class="token punctuation">[</span><span class="token string">&quot;Status&quot;</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">&quot;OffLine&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>Session<span class="token punctuation">[</span><span class="token string">&quot;Status&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;OnLine&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>在PageUnLoad事件里对<code>Session[&quot;Status&quot;]</code>进行操作</p></blockquote><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token function">PageUnLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Session<span class="token punctuation">[</span><span class="token string">&quot;Status&quot;</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Session<span class="token punctuation">[</span><span class="token string">&quot;Status&quot;</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">&quot;OnLine&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Session<span class="token punctuation">[</span><span class="token string">&quot;Status&quot;</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">&quot;OffLine&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>这是一个技巧，就是当用户离开这个页面的时候，你检查他的<code>Session[&quot;Status&quot;]</code>就知道他已经离线了~而当这个页面回发的时候，我们可不能认为用户是执行离线操作，对吧？！<br> 所以只要是回发操作，用户的状态就永远是在线。除非他真的离线了~而很幸运的，我们已经在Unload事件中对此进行了处理~~~:)</p></blockquote><p>回复人： chestnuts(c# Sharp) ( 四级(中级)) 信誉：100 2003-9-27 9:34:00 得分:0</p><blockquote><p>到时候你检查Session就可以了<s>赫赫</s>~</p></blockquote><p>回复人： chestnuts(c# Sharp) ( 四级(中级)) 信誉：100 2003-9-27 9:35:49 得分:0</p><blockquote><p>我是想到的~可不是做到的~~<br> 赫赫~~<br> 酱的对不对就不知道了~<br> 不过你也别现搬现用~<br> 其实status记录应该和用户的信息一起存在一个Session里的~~<br> HoHo</p></blockquote><p>回复人： nia2000() ( 一级(初级)) 信誉：100 2003-9-27 15:36:41 得分:0</p><blockquote><p>服务器端有PageUnLoad事件？？</p></blockquote><p>回复人： chestnuts(c# Sharp) ( 四级(中级)) 信誉：100 2003-9-27 19:43:28 得分:0</p><blockquote><p>哎？！！<br> 有没有事件不会自己查阿？<br> 非叫我费唇舌？</p></blockquote><p>回复人： chestnuts(c# Sharp) ( 四级(中级)) 信誉：100 2003-9-27 19:53:49 得分:0</p><blockquote><p>UnLoad事件是有的</p></blockquote><p>回复人： chestnuts(c# Sharp) ( 四级(中级)) 信誉：100 2003-9-27 19:54:49 得分:0</p><blockquote><p>我所说的PageUnLoad是即兴写的！其实是UnLoad事件</p></blockquote><p>回复人： nia2000() ( 一级(初级)) 信誉：100 2003-9-28 9:06:43 得分:0</p><blockquote><p>大哥小弟是刚学啊！不要这么说撒！！</p></blockquote><p>回复人： nia2000() ( 一级(初级)) 信誉：100 2003-9-28 9:07:41 得分:0</p><blockquote><p>我还是不知道unload事件在哪？</p></blockquote><p>回复人： chestnuts(c# Sharp) ( 四级(中级)) 信誉：100 2003-9-28 13:19:18 得分:0</p><blockquote><p><code>~~~~</code><br> 我很累~~~~<br> 如果连事件怎么设都不知道，你还是回去好好看看21天学通c#叭~~<br> 我不要你的分了~<br> 太累~~</p></blockquote><p>回复人： nia2000() ( 一级(初级)) 信誉：100 2003-9-28 13:26:21 得分:0</p><blockquote><p>我不是要你说怎么设？我问的是服务器端有unload事件吗？我问了别人都说没有！<br> 怎么到你这就有了？我知道一个页面有一个page_load事件可是怎么没看到unload事件？</p></blockquote><p>回复人： chestnuts(c# Sharp) ( 四级(中级)) 信誉：100 2003-9-28 14:18:43 得分:0</p><blockquote><p>有就是有~<br> 没有就是没有~<br> 你在web程序的代码模式下打this.<br> 你再看看出来的列表框里存在不存在UnLoad事件~~<br> 说没有的都是菜菜鸟！<br> 我只不过是菜鸟而已~~<br> 拿100分来</p></blockquote><p>回复人： nia2000() ( 一级(初级)) 信誉：100 2003-9-30 9:11:44 得分:0</p><blockquote><p>靠！就你这样子还想要100分？？收起你的回答吧！！呵呵！！<br> 给你几分算了！看你想分都想疯了就丢给你几分吧！！</p></blockquote><p>该问题已经结贴 ，得分记录： wangjs720 (5)、 yan1617 (5)、 chestnuts (10)、</p>`,44),c=[p];function e(u,l){return s(),a("div",null,c)}const i=n(o,[["render",e],["__file","netinter17.html.vue"]]);export{i as default};
