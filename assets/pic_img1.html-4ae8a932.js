import{_ as n,o as s,c as a,a as p}from"./app-d9da1b6d.js";const t={},o=p(`<h1 id="实例介绍c-gui开发" tabindex="-1"><a class="header-anchor" href="#实例介绍c-gui开发" aria-hidden="true">#</a> 实例介绍C# GUI开发</h1><blockquote><p>crystal aspxcn.com 2002-07-19</p></blockquote><p>在本文里，通过编辑一个小小的可以将温度从摄氏转换到华氏的程序，我们将亲身体会到C# GUI开发过程。阅读本文最基本的要求是您要具有C＃及面向对象程序设计的基本知识。本文的写作宗旨是介绍C＃，如果您希望编译或是运行本文所列举的程序，则需要有.NET Framework SDK的支持。</p><p>创建一个视窗应用程序主要包括以下的基本步骤：创建适合的表单，在表单上添加control，最后添加代码。完成上述过程所需用到的C# 以及 .NET framework我们可以在System.WinForms namespace中找到。</p><p>第一步，创建表单。</p><p>我们以　class System.WinForms　为起源，创建一个class，然后初始化属性。本文举例中，Class的定义起始如下</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TempConverter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">System<span class="token punctuation">.</span>WinForms<span class="token punctuation">.</span>Form</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span>
<span class="token punctuation">.</span>
<span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下面是我们想要的主窗口式样</p><p>大小为180＊90像素<br> 不能随意修改视窗大小。<br> 标题显示为　°C-&gt;°F / °F-&gt;°C<br> 表单出现在屏幕中央<br> 我们不需要&quot;帮助&quot;键（我们编制的应用程序过于简便，以至不需要此类帮助）<br> 我们不需要让用户有扩大该程序视窗范围的权限（因为在给定尺寸里，什么都清晰可见）</p><p>通过设定TempConverter对象的属性值初始化表单。属性值的设定有两种方法：<br> 一、使用方法设定属性值<br> 二、通过属性变量直接设定。</p><p>以下代码。如果您想知道更多的有关于WinForms class的属性和方法的知识，则可以参阅.NET Framework SDK的随机文件。</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>BorderStyle <span class="token operator">=</span> FormBorderStyle<span class="token punctuation">.</span>FixedDialog<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°C-&gt;°F / °F-&gt;°C&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>StartPosition <span class="token operator">=</span> FormStartPosition<span class="token punctuation">.</span>CenterScreen<span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>HelpButton <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>MaximizeBox <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div><p>通过上述步骤，我们可以把所有的代码连接在一起，这样我们就能很方便的编辑、运行程序观看表单的外观。为此，我们要用到class　定义，要创建一个构造器（该构造器包含了上面所提到的代码并会初始化主视窗的外观），然后还需要建立一个main方法。具体建立步骤如下：</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TempConverter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">System<span class="token punctuation">.</span>WinForms<span class="token punctuation">.</span>Form</span></span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token function">TempConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>BorderStyle <span class="token operator">=</span> FormBorderStyle<span class="token punctuation">.</span>FixedDialog<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°C-&gt;°F / °F-&gt;°C&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>StartPosition <span class="token operator">=</span> FormStartPosition<span class="token punctuation">.</span>CenterScreen<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>HelpButton <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>MaximizeBox <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Application<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TempConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在<code>Main()</code>中出现了一条新的语句：</p><p><code>Application.Run(new TempConverter());</code></p><p>正如您所猜想的一样，这条语句的意思是运行新表单</p><p>假设我们的源文件名称为：　TempConverter.cs，那么我们通过执行下列命令来编译代码：</p><p><code>csc /r:System.dll /r:Microsoft.Win32.Interop.dll /r:System.WinForms.dll TempConverter.cs</code></p><p>当启动Visual Studio .NET时，并不需要键入指令行，因此在本文不加详述。</p><p>下一步是在表单中添加控件。首先为每个控件创建一个实例变量，然后初始化这些变量，最后将每个控件放置于表单上。当我们添加完控件后，就得到了我们想要的一个完整表单。</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TempConverter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">System<span class="token punctuation">.</span>WinForms<span class="token punctuation">.</span>Form</span></span> <span class="token punctuation">{</span>

    <span class="token class-name">Label</span> lTempFah <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Label</span> lTempCel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TextBox</span> tTempFah <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TextBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TextBox</span> tTempCel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TextBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Button</span> bnCtoF <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Button</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Button</span> bnFtoC <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Button</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">TempConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>BorderStyle <span class="token operator">=</span> FormBorderStyle<span class="token punctuation">.</span>FixedDialog<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°C-&gt;°F / °F-&gt;°C&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>StartPosition <span class="token operator">=</span> FormStartPosition<span class="token punctuation">.</span>CenterScreen<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>HelpButton <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>MaximizeBox <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lTempCel<span class="token punctuation">.</span>TabStop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        lTempCel<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°C&quot;</span><span class="token punctuation">;</span>
        lTempCel<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lTempCel<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lTempFah<span class="token punctuation">.</span>TabStop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        lTempFah<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°F&quot;</span><span class="token punctuation">;</span>
        lTempFah<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lTempFah<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">142</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnCtoF<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        bnCtoF<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°C to °F&quot;</span><span class="token punctuation">;</span>
        bnCtoF<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnCtoF<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnFtoC<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        bnFtoC<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°F to °C&quot;</span><span class="token punctuation">;</span>
        bnFtoC<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnFtoC<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>tTempCel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>lTempCel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>tTempFah<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>lTempFah<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>bnCtoF<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>bnFtoC<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><p>通过上述步骤，我们已创建两个标签，两个文本框，以及两个按钮。然后我们已初始化了每个控件并将它们添加到了表单上。下面是使用的各种方法介绍：</p><ul><li><code>SetSize()</code>初始化控件的尺寸</li><li><code>SetLocation()</code>初始化控件在表单中的位置</li><li>设置<code>TabStop</code> 属性为<code>false</code>，以便当点击Tab键 时，可以显示focus并未被设置</li><li>设置<code>TabIndex =X</code>表示在点击TAB键x次后，focus会被设置在确定的控件上。</li><li>text属性即是控件显现出来的文本。</li><li>Controls.Add()将 控件添加到了表单上（快捷添加控件的方法是：<code>.Controls = new Control[] { tTempCel, lTempCel, tTempFar…..};</code>）</li></ul><p>还有最后一步我们将大功告成。下面即是由摄氏至华氏按键的代码。</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">bnCtoF_Click</span><span class="token punctuation">(</span><span class="token class-name">Object</span> sender<span class="token punctuation">,</span> <span class="token class-name">EventArgs</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">double</span></span> dTempCel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">double</span></span> dTempFah <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span> dTempCel <span class="token operator">=</span> tTempCel<span class="token punctuation">.</span>Text<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tTempCel<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    dTempFah <span class="token operator">=</span> <span class="token number">1.8</span><span class="token operator">*</span>dTempCel<span class="token operator">+</span><span class="token number">32</span><span class="token punctuation">;</span>
    tTempFah<span class="token punctuation">.</span>Text <span class="token operator">=</span> dTempFah<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tTempFah<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tTempFah<span class="token punctuation">.</span>SelectionStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    tTempFah<span class="token punctuation">.</span>SelectionLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    tTempCel<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tTempCel<span class="token punctuation">.</span>SelectionStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    tTempCel<span class="token punctuation">.</span>SelectionLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>第三行至第八行的指令将会试着将数值收集到Celsius文本框里。如果是<code>double</code>数值那么我们将会把数值存于<code>dTempCel</code>单元中，否则我们将清除两个文本框的内容的同时退出。下一步，利用<code>dTempCel</code>中的值，使用第九行的公式来存储华氏温度，结果显示在华氏文本框中。</p><p>重复相同的步骤来完成华氏button的代码：</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">bnFtoC_Click</span><span class="token punctuation">(</span><span class="token class-name">Object</span> sender<span class="token punctuation">,</span> <span class="token class-name">EventArgs</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">double</span></span> dTempCel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token keyword">double</span></span> dTempFah <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span> dTempFah <span class="token operator">=</span> tTempFah<span class="token punctuation">.</span>Text<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tTempCel<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    dTempCel <span class="token operator">=</span> <span class="token punctuation">(</span>dTempFah<span class="token operator">-</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1.8</span><span class="token punctuation">;</span>
    tTempCel<span class="token punctuation">.</span>Text <span class="token operator">=</span> dTempCel<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tTempCel<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tTempCel<span class="token punctuation">.</span>SelectionStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    tTempCel<span class="token punctuation">.</span>SelectionLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    tTempFah<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tTempFah<span class="token punctuation">.</span>SelectionStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    tTempFah<span class="token punctuation">.</span>SelectionLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>最后一步则是将其结合起来。具体步骤参照如下：</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code>bnCtoF<span class="token punctuation">.</span>Click <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EventHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bnCtoF_Click<span class="token punctuation">)</span><span class="token punctuation">;</span>
bnFtoC<span class="token punctuation">.</span>Click <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EventHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bnFtoC_Click<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>以下是完整的代码:</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>WinForms</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TempConverter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">System<span class="token punctuation">.</span>WinForms<span class="token punctuation">.</span>Form</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">Label</span> lTempFah <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Label</span> lTempCel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TextBox</span> tTempFah <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TextBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TextBox</span> tTempCel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TextBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Button</span> bnCtoF <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Button</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Button</span> bnFtoC <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Button</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">TempConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>BorderStyle <span class="token operator">=</span> FormBorderStyle<span class="token punctuation">.</span>FixedDialog<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°C-&gt;°F / °F-&gt;°C&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>StartPosition <span class="token operator">=</span> FormStartPosition<span class="token punctuation">.</span>CenterScreen<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>HelpButton <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>MaximizeBox <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lTempCel<span class="token punctuation">.</span>TabStop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        lTempCel<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°C&quot;</span><span class="token punctuation">;</span>
        lTempCel<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lTempCel<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lTempFah<span class="token punctuation">.</span>TabStop <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        lTempFah<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°F&quot;</span><span class="token punctuation">;</span>
        lTempFah<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        lTempFah<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">142</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnCtoF<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        bnCtoF<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°C to °F&quot;</span><span class="token punctuation">;</span>
        bnCtoF<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnCtoF<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnCtoF<span class="token punctuation">.</span>Click <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EventHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bnCtoF_Click<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnFtoC<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        bnFtoC<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;°F to °C&quot;</span><span class="token punctuation">;</span>
        bnFtoC<span class="token punctuation">.</span><span class="token function">SetSize</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnFtoC<span class="token punctuation">.</span><span class="token function">SetLocation</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bnFtoC<span class="token punctuation">.</span>Click <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EventHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>bnFtoC_Click<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>tTempCel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>lTempCel<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>tTempFah<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>lTempFah<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>bnCtoF<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>bnFtoC<span class="token punctuation">)</span><span class="token punctuation">;</span>
        file<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Control <span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span> tTempCel<span class="token punctuation">,</span> lTempCel<span class="token punctuation">,</span> tTempFah<span class="token punctuation">,</span> lTempFah<span class="token punctuation">,</span> bnCtoF<span class="token punctuation">,</span> bnFtoC <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Application<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TempConverter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">bnCtoF_Click</span><span class="token punctuation">(</span><span class="token class-name">Object</span> sender<span class="token punctuation">,</span> <span class="token class-name">EventArgs</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">double</span></span> dTempCel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">double</span></span> dTempFah <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span> dTempCel <span class="token operator">=</span> tTempCel<span class="token punctuation">.</span>Text<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            tTempCel<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            tTempFah<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        dTempFah <span class="token operator">=</span> <span class="token number">1.8</span><span class="token operator">*</span>dTempCel<span class="token operator">+</span><span class="token number">32</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span>Text <span class="token operator">=</span> dTempFah<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span>SelectionStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span>SelectionLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span>SelectionStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span>SelectionLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">bnFtoC_Click</span><span class="token punctuation">(</span><span class="token class-name">Object</span> sender<span class="token punctuation">,</span> <span class="token class-name">EventArgs</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">double</span></span> dTempCel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token class-name"><span class="token keyword">double</span></span> dTempFah <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span> dTempFah <span class="token operator">=</span> tTempFah<span class="token punctuation">.</span>Text<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            tTempCel<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            tTempFah<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        dTempCel <span class="token operator">=</span> <span class="token punctuation">(</span>dTempFah<span class="token operator">-</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1.8</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span>Text <span class="token operator">=</span> dTempCel<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span>SelectionStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        tTempCel<span class="token punctuation">.</span>SelectionLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span><span class="token function">Focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span>SelectionStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        tTempFah<span class="token punctuation">.</span>SelectionLength <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>`,33),c=[o];function e(u,l){return s(),a("div",null,c)}const i=n(t,[["render",e],["__file","pic_img1.html.vue"]]);export{i as default};
