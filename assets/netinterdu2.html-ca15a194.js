import{_ as n,o as s,c as a,a as t}from"./app-d9da1b6d.js";const p="data:image/png;base64,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",o={},e=t('<h1 id="用visual-c-实现文件下载功能" tabindex="-1"><a class="header-anchor" href="#用visual-c-实现文件下载功能" aria-hidden="true">#</a> 用Visual C#实现文件下载功能</h1><p>出处：PConline 责任编辑：pcedu [03-1-15 11:13] 作者：王凯明/ASPCool</p><h2 id="一、概述" tabindex="-1"><a class="header-anchor" href="#一、概述" aria-hidden="true">#</a> 一、概述</h2><p>本文通过一个实例向大家介绍用Visual C#进行Internet通讯编程的一些基本知识。我们知道.Net类包含了请求/响应层、应用协议层、传输层等层次。在本程序中，我们运用了位于请求/响应层的WebRequest类以及WebClient类等来实现高抽象程度的Internet通讯服务。本程序的功能是完成网络文件的下载。</p><h2 id="二、实现原理" tabindex="-1"><a class="header-anchor" href="#二、实现原理" aria-hidden="true">#</a> 二、实现原理</h2><p>程序实现的原理比较简单，主要用到了WebClient类和FileStream类。其中WebClient类处于System.Net名字空间中，该类的主要功能是提供向URI标识的资源发送数据和从URI标识的资源接收数据的公共方法。我们利用其中的DownloadFile（）方法将网络文件下载到本地。然后用FileStream类的实例对象以数据流的方式将文件数据写入本地文件。这样就完成了网络文件的下载。</p><h2 id="三、实现步骤" tabindex="-1"><a class="header-anchor" href="#三、实现步骤" aria-hidden="true">#</a> 三、实现步骤</h2><p>首先，打开Visual Studio.Net，新建一个Visual C# Windows应用程序的工程，不妨命名为&quot;MyGetCar&quot;。</p><p>接着，布置主界面。我们先往主窗体上添加如下控件：两个标签控件、两个文本框控件、一个按钮控件以及一个状态栏控件。最终的主窗体如下图所示：</p><p><img src="'+p+`" alt="main_win"></p><p>完成主窗体的设计，我们接着完成代码的编写。</p><p>在理解了基本原理的基础上去完成代码的编写是相当容易。程序中我们主要用到的是WebClient类，不过在我们调用WebClient类的实例对象前，我们需要用WebRequest类的对象发出对统一资源标识符(URI)的请求。</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">try</span>
<span class="token punctuation">{</span>
    <span class="token class-name">WebRequest</span> myre <span class="token operator">=</span> WebRequest<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>URLAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">WebException</span> exp<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>exp<span class="token punctuation">.</span>Message<span class="token punctuation">,</span> <span class="token string">&quot;Error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这是一个try-catch语句，try块完成向URI的请求，catch块则捕捉可能的异常并显示异常信息。其中的URLAddress为被请求的网络主机名。</p><p>在请求成功后，我们就可以运用WebClient类的实例对象中的DownloadFile（）方法实现文件的下载了。其函数原型如下：</p><p><code>public void DownloadFile( string address, string fileName);</code></p><p>其中，参数address为从中下载数据的 URI，fileName为要接收数据的本地文件的名称。</p><p>之后我们用OpenRead（）方法来打开一个可读的流，该流完成从具有指定URI的资源下载数据的功能。其函数原型如下：</p><p><code>public Stream OpenRead(string address);</code> 　 其中，参数address同上。<br> 最后就是新建一个StreamReader对象从中读取文件的数据，并运用一个while循环体不断读取数据，只到读完所有的数据。</p><p>还有在使用以上方法时，你将可能需要处理以下几种异常：</p><p>WebException：下载数据时发生错误。<br> UriFormatException：通过组合BaseAddress、address和QueryString所构成的URI无效。</p><p>这部分的代码如下：(client为WebClient对象，在本类的开头处声明即可)</p><p>完成了文件数据的读取工作后，我们运用FileStream类的实例对象将这些数据写入本地文件中：</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">FileStream</span> fstr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileStream</span><span class="token punctuation">(</span>Path<span class="token punctuation">,</span>FileMode<span class="token punctuation">.</span>OpenOrCreate<span class="token punctuation">,</span>FileAccess<span class="token punctuation">.</span>Write<span class="token punctuation">)</span><span class="token punctuation">;</span>
fstr<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>mbyte<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>startmbyte<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这样，程序主体部分的代码已经完成了，不过要完成全部程序还需要一些工作。由于在程序接收网络文件数据的时候运用到了while循环体，这样会很占程序资源，表现的形式就是主窗体不能自由移动。为了解决这个问题，我们在程序中用到了多线程机制。我们在响应按钮的事件中新建一个线程，该线程就是用来实现网络文件下载功能的。如此，文件下载的线程和程序主线程并存，共享进程资源，使得程序顺畅运行。这样，我们在按钮控件的消息响应函数里添加如下代码：</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name">Thread</span> th <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ThreadStart</span><span class="token punctuation">(</span>StartDownload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
th<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>该线程的实现函数就是StartDownload()，而上面介绍的那些代码就是这个函数的主体部分。</p><p>最后，因为程序中运用到了WebRequest、WebClient、FileStream、Thread等类，所以最重要的就是在程序的开始处添加如下名字空间：</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Net</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>IO</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading</span><span class="token punctuation">;</span>
</code></pre></div><p>下面就是程序的源代码：</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Drawing</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>ComponentModel</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Net</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>IO</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">MyGetCar</span>
<span class="token punctuation">{</span>
    <span class="token doc-comment comment">/// </span>
    <span class="token doc-comment comment">/// Form1 的摘要说明。 </span>
    <span class="token doc-comment comment">/// </span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Form1</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>Form</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>Label</span> label1<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>Label</span> label2<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>TextBox</span> srcAddress<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>TextBox</span> tarAddress<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>StatusBar</span> statusBar<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>Button</span> Start<span class="token punctuation">;</span>

        <span class="token keyword">private</span> <span class="token class-name">WebClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WebClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token doc-comment comment">/// </span>
        <span class="token doc-comment comment">/// 必需的设计器变量。 </span>
        <span class="token doc-comment comment">/// </span>
        <span class="token keyword">private</span> <span class="token class-name">System<span class="token punctuation">.</span>ComponentModel<span class="token punctuation">.</span>Container</span> components <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">Form1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// </span>
            <span class="token comment">// Windows 窗体设计器支持所必需的 </span>
            <span class="token comment">// </span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// </span>
            <span class="token comment">// TODO: 在 InitializeComponent 调用后添加任何构造函数代码 </span>
            <span class="token comment">// </span>
        <span class="token punctuation">}</span>

        <span class="token doc-comment comment">/// </span>
        <span class="token doc-comment comment">/// 清理所有正在使用的资源。 </span>
        <span class="token doc-comment comment">/// </span>
        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> disposing<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>disposing<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>components <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    components<span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Dispose</span><span class="token punctuation">(</span>disposing<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token preprocessor property">#<span class="token directive keyword">region</span> Windows Form Designer generated code </span>
        <span class="token doc-comment comment">/// </span>
        <span class="token doc-comment comment">/// 设计器支持所需的方法 - 不要使用代码编辑器修改 </span>
        <span class="token doc-comment comment">/// 此方法的内容。 </span>
        <span class="token doc-comment comment">/// </span>
        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>Label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>Label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>srcAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>TextBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tarAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>TextBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>statusBar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>StatusBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Start <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>Button</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">SuspendLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// </span>
            <span class="token comment">// label1 </span>
            <span class="token comment">// </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label1<span class="token punctuation">.</span>Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label1<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;label1&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label1<span class="token punctuation">.</span>Size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label1<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label1<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;文件地址：&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label1<span class="token punctuation">.</span>TextAlign <span class="token operator">=</span> System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>ContentAlignment<span class="token punctuation">.</span>MiddleRight<span class="token punctuation">;</span>
            <span class="token comment">// </span>
            <span class="token comment">// label2 </span>
            <span class="token comment">// </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label2<span class="token punctuation">.</span>Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label2<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;label2&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label2<span class="token punctuation">.</span>Size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">72</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label2<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label2<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;另存到：&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>label2<span class="token punctuation">.</span>TextAlign <span class="token operator">=</span> System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>ContentAlignment<span class="token punctuation">.</span>MiddleRight<span class="token punctuation">;</span>
            <span class="token comment">// </span>
            <span class="token comment">// srcAddress </span>
            <span class="token comment">// </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>srcAddress<span class="token punctuation">.</span>Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>srcAddress<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;srcAddress&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>srcAddress<span class="token punctuation">.</span>Size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">216</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>srcAddress<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>srcAddress<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">// </span>
            <span class="token comment">// tarAddress </span>
            <span class="token comment">// </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tarAddress<span class="token punctuation">.</span>Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tarAddress<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;tarAddress&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tarAddress<span class="token punctuation">.</span>Size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">216</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tarAddress<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>tarAddress<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">// </span>
            <span class="token comment">// statusBar </span>
            <span class="token comment">// </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>statusBar<span class="token punctuation">.</span>Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>statusBar<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;statusBar&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>statusBar<span class="token punctuation">.</span>Size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>statusBar<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
            <span class="token comment">// </span>
            <span class="token comment">// Start </span>
            <span class="token comment">// </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Start<span class="token punctuation">.</span>FlatStyle <span class="token operator">=</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>FlatStyle<span class="token punctuation">.</span>Flat<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Start<span class="token punctuation">.</span>Location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span><span class="token number">216</span><span class="token punctuation">,</span> <span class="token number">112</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Start<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;Start&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Start<span class="token punctuation">.</span>Size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Start<span class="token punctuation">.</span>TabIndex <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Start<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;开始下载&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Start<span class="token punctuation">.</span>Click <span class="token operator">+=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>EventHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Start_Click<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// </span>
            <span class="token comment">// Form1 </span>
            <span class="token comment">// </span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>AutoScaleBaseSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ClientSize <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">312</span><span class="token punctuation">,</span> <span class="token number">173</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Controls<span class="token punctuation">.</span><span class="token function">AddRange</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Forms<span class="token punctuation">.</span>Control<span class="token punctuation">[</span><span class="token punctuation">]</span></span> <span class="token punctuation">{</span>
                                    <span class="token keyword">this</span><span class="token punctuation">.</span>Start<span class="token punctuation">,</span>
                                    <span class="token keyword">this</span><span class="token punctuation">.</span>statusBar<span class="token punctuation">,</span>
                                    <span class="token keyword">this</span><span class="token punctuation">.</span>tarAddress<span class="token punctuation">,</span>
                                    <span class="token keyword">this</span><span class="token punctuation">.</span>srcAddress<span class="token punctuation">,</span>
                                    <span class="token keyword">this</span><span class="token punctuation">.</span>label2<span class="token punctuation">,</span>
                                    <span class="token keyword">this</span><span class="token punctuation">.</span>label1<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>MaximizeBox <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;Form1&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;文件下载器&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">ResumeLayout</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>

        <span class="token doc-comment comment">/// </span>
        <span class="token doc-comment comment">/// 应用程序的主入口点。 </span>
        <span class="token doc-comment comment">/// </span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">STAThread</span></span><span class="token punctuation">]</span>
        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Application<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Form1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">StartDownload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            Start<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">string</span></span> URL <span class="token operator">=</span> srcAddress<span class="token punctuation">.</span>Text<span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">int</span></span> n <span class="token operator">=</span> URL<span class="token punctuation">.</span><span class="token function">LastIndexOf</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">string</span></span> URLAddress <span class="token operator">=</span> URL<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">string</span></span> fileName <span class="token operator">=</span> URL<span class="token punctuation">.</span><span class="token function">Substring</span><span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> URL<span class="token punctuation">.</span>Length <span class="token operator">-</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">string</span></span> Dir <span class="token operator">=</span> tarAddress<span class="token punctuation">.</span>Text<span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">string</span></span> Path <span class="token operator">=</span> Dir <span class="token operator">+</span> <span class="token string">&quot;\\\\&quot;</span> <span class="token operator">+</span> fileName<span class="token punctuation">;</span>

            <span class="token keyword">try</span>
            <span class="token punctuation">{</span>
                <span class="token class-name">WebRequest</span> myre <span class="token operator">=</span> WebRequest<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>URLAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">WebException</span> exp<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>exp<span class="token punctuation">.</span>Message<span class="token punctuation">,</span> <span class="token string">&quot;Error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">try</span>
            <span class="token punctuation">{</span>
                statusBar<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;开始下载文件...&quot;</span><span class="token punctuation">;</span>
                client<span class="token punctuation">.</span><span class="token function">DownloadFile</span><span class="token punctuation">(</span>URLAddress<span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Stream</span> str <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">OpenRead</span><span class="token punctuation">(</span>URLAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">StreamReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StreamReader</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> mbyte <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name"><span class="token keyword">byte</span></span><span class="token punctuation">[</span><span class="token number">100000</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">int</span></span> allmybyte <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>mbyte<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>
                <span class="token class-name"><span class="token keyword">int</span></span> startmbyte <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                statusBar<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;正在接收数据...&quot;</span><span class="token punctuation">;</span>
                <span class="token keyword">while</span> <span class="token punctuation">(</span>allmybyte <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token class-name"><span class="token keyword">int</span></span> m <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>mbyte<span class="token punctuation">,</span> startmbyte<span class="token punctuation">,</span> allmybyte<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>m <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>

                    startmbyte <span class="token operator">+=</span> m<span class="token punctuation">;</span>
                    allmybyte <span class="token operator">-=</span> m<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token class-name">FileStream</span> fstr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileStream</span><span class="token punctuation">(</span>Path<span class="token punctuation">,</span> FileMode<span class="token punctuation">.</span>OpenOrCreate<span class="token punctuation">,</span> FileAccess<span class="token punctuation">.</span>Write<span class="token punctuation">)</span><span class="token punctuation">;</span>
                fstr<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>mbyte<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> startmbyte<span class="token punctuation">)</span><span class="token punctuation">;</span>
                str<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                fstr<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                statusBar<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;下载完毕！&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">WebException</span> exp<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>exp<span class="token punctuation">.</span>Message<span class="token punctuation">,</span> <span class="token string">&quot;Error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                statusBar<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            Start<span class="token punctuation">.</span>Enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start_Click</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">System<span class="token punctuation">.</span>EventArgs</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> th <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ThreadStart</span><span class="token punctuation">(</span>StartDownload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            th<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="四-总结" tabindex="-1"><a class="header-anchor" href="#四-总结" aria-hidden="true">#</a> 四．总结</h2><p>以上我通过一个实例向大家展示了如何用Visual C#实现网络文件的下载，我们不难发现用Visual C#进行Internet通讯编程是非常方便的。在上面的程序中，我们仅仅用到了WebClient类的一些方法，而WebClient类不光提供了网络文件下载的方法，还提供了文件上传的方法，有兴趣的读者不妨一试――用之实现一个文件上传器。同时这个程序只是一个非常简单的例子，程序下载完一个网页后，它所获得的仅仅是主页面的内容，并不能获得其中的图片、CSS等文件，所以要做出一个比较好的文件下载器还需读者进一步改进之。</p>`,33),c=[e];function u(l,k){return s(),a("div",null,c)}const r=n(o,[["render",u],["__file","netinterdu2.html.vue"]]);export{r as default};
