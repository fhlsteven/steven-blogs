import{_ as n,o as s,c as a,a as t}from"./app-8e5157a8.js";const p={},o=t(`<h1 id="用webclient怎样设置才能上传文件" tabindex="-1"><a class="header-anchor" href="#用webclient怎样设置才能上传文件" aria-hidden="true">#</a> 用WebClient怎样设置才能上传文件?</h1><div class="language-txt" data-ext="txt"><pre class="language-txt"><code>主　　题：  用WebClient怎样设置才能上传文件?
作　　者：  jb2008 (飞天.net)  
等　　级：  ^^^^^
信 誉 值：  99
所属论坛：  .NET技术 C#
问题点数：  50
回复次数：  13
发表时间：  2003-3-20 17:09:43
</code></pre></div><p>下面是用WebClient上传文件的代码，发生405不允许错误。<br> 服务器端怎么样设置才能接收。</p><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code><span class="token class-name"><span class="token keyword">string</span></span> fileName <span class="token operator">=</span> <span class="token string">@&quot;D:\\worddocuments\\Excel\\tools.xls&quot;</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> uriString <span class="token operator">=</span> <span class="token string">&quot;http://134.242.7.147/search&quot;</span><span class="token punctuation">;</span>

<span class="token class-name">WebClient</span> myWebClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WebClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span>
<span class="token punctuation">{</span>
    myWebClient<span class="token punctuation">.</span><span class="token function">UploadFile</span><span class="token punctuation">(</span>uriString<span class="token punctuation">,</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> err<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    MessageBox<span class="token punctuation">.</span><span class="token function">Show</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr><hr><p>回复人： jb2008(飞天.net) ( 五级(中级)) 信誉：99 2003-3-20 21:31:37 得分:0</p><blockquote><p>up</p></blockquote><p>回复人： qieyj(温馨港湾) ( 两星(中级)) 信誉：120 2003-3-20 21:36:52 得分:10</p><blockquote><p>下面的示例使用 UploadFile 将指定文件上载到指定 URI。由服务器返回的任何响应都显示到控制台。</p></blockquote><div class="language-csharp" data-ext="cs"><pre class="language-csharp"><code>Console<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span><span class="token string">&quot;\\nPlease enter the URI to post data to : &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> uriString <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a new WebClient instance.</span>
<span class="token class-name">WebClient</span> myWebClient <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WebClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;\\nPlease enter the fully qualified path of the file to be uploaded to the URI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name"><span class="token keyword">string</span></span> fileName <span class="token operator">=</span> Console<span class="token punctuation">.</span><span class="token function">ReadLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;Uploading {0} to {1} ...&quot;</span><span class="token punctuation">,</span> fileName<span class="token punctuation">,</span> uriString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Upload the file to the URI.</span>
<span class="token comment">// The &#39;UploadFile(uriString,fileName)&#39; method implicitly uses HTTP POST method.</span>
<span class="token class-name"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> responseArray <span class="token operator">=</span> myWebClient<span class="token punctuation">.</span><span class="token function">UploadFile</span><span class="token punctuation">(</span>uriString<span class="token punctuation">,</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Decode and display the response.</span>
Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">&quot;\\nResponse Received.The contents of the file uploaded are: \\n{0}&quot;</span><span class="token punctuation">,</span> Encoding<span class="token punctuation">.</span>ASCII<span class="token punctuation">.</span><span class="token function">GetString</span><span class="token punctuation">(</span>responseArray<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>回复人： qieyj(温馨港湾) ( 两星(中级)) 信誉：120 2003-3-21 11:22:16 得分:10</p><blockquote><p><code>string uriString = &quot;http://134.242.7.147/search&quot;;</code><br> 这个url地址可能需要侦听网络并发送请求，你可能的使用System.Net.Sockets 命名空间提供 TCPClient 类、TCPListener 类和 UDPClient 类这些类处理使用不同的传输协议建立连接的详细信息，并且作为流向应用程序公开网络连接。</p></blockquote><p>回复人： jb2008(飞天.net) ( 五级(中级)) 信誉：99 2003-3-21 11:56:23 得分:0</p><blockquote><p>不懂</p></blockquote><p>回复人： kingwood2000(kingwood) ( 三级(初级)) 信誉：100 2003-3-21 12:14:51 得分:0</p><blockquote><p>在服务器端将上传目录的权限中添加asp.net用户，设置为修改。试试！</p></blockquote><p>回复人： jb2008(飞天.net) ( 五级(中级)) 信誉：99 2003-3-21 13:45:00 得分:0</p><blockquote><p>谁能提供从客户端上传批量文件到服务器上的最方法，<br> webclient<br> ftp<br> socket<br> CopyTo</p></blockquote><p>回复人： spanzhang(红尘斩丝客) ( 一级(初级)) 信誉：100 2003-3-27 14:00:05 得分:0</p><blockquote><p>关注</p></blockquote><p>回复人： zwztu(做自己想做的事) ( 两星(中级)) 信誉：110 2003-3-27 14:02:32 得分:0</p><blockquote><p>强烈关注</p></blockquote><p>回复人： spanzhang(红尘斩丝客) ( 一级(初级)) 信誉：100 2003-3-27 15:10:21 得分:0</p><blockquote><p>用WebClient下载没任何问题。所以，我想，在服务器方应该有个东西来接收数据并保存到文件。这个东西是什么呢？</p></blockquote><p>回复人： spanzhang(红尘斩丝客) ( 一级(初级)) 信誉：100 2003-3-28 11:19:41 得分:30</p><blockquote><p>靠，我终于搞懂了是怎么回事了。如果谁需要就给我发短消息吧。</p></blockquote><p>回复人： sscwxch(星际浪子) ( 一级(初级)) 信誉：100 2003-6-16 0:33:10 得分:0</p><blockquote><p>我需要!thanks</p></blockquote><p>回复人： iGuoJing(iGuoJing) ( 二级(初级)) 信誉：100 2003-6-16 1:52:11 得分:0</p><blockquote><p>yao.</p></blockquote><p>回复人： tttzms(乡巴佬) ( 一级(初级)) 信誉：100 2003-6-16 8:45:18 得分:0</p><blockquote><p>开一贴子大家分享啊</p></blockquote><p>该问题已经结贴 ，得分记录： qieyj (10)、 qieyj (10)、 spanzhang (30)</p>`,34),e=[o];function c(l,u){return s(),a("div",null,e)}const k=n(p,[["render",c],["__file","netinterdu7.html.vue"]]);export{k as default};
